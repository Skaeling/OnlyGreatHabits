<h1>Great Habits Backend Project</h1>
<p>Это backend-версия трекера для отслеживания полезных и приятных привычек. Приложение созданно с использованием Django DRF, для контейнеризации и деплоя используется Docker, Docker compose, GitHubActions.

<h2>Основные сервисы:</h2>
<ul>
  <li>Django</li>
  <li>Celery</li>
  <li>Celery_beat</li>
  <li>Django-rest-framework</li>
  <li>Redis</li>
</ul>

<h2>Основные функции:</h2>
<ol>
  <li>Регистрация и авторизация пользователей.</li>
  <li>Создание и управление привычками, включая возможность задать периодичность исполнения в минутах.</li>
  <li>Возможность делиться публичными привычками с другими пользователями сервиса. </li>
  <li>Отправка напоминаний о необходимости выполнения привычки и награде в телеграм-мессенджере (при предоставлении chat_id) или на электронную почту.</li>
</ol>

<h2>I. Запуск проекта локально через Docker Compose:</h2>
<ol>
  <li>Клонируйте репозиторий проекта и перейдите в ветку feature-1</li>
  <li>Скопируйте файл <code>.env.sample</code> в корневую директорию и переименуйте его в <code>.env</code>:</li>
  <li>Отредактируйте файл <code>.env</code> и задайте необходимые переменные окружения.</li>
  <li>Запустите контейнеры Docker с помощью команды:
    <pre>docker-compose up -d --build</pre>
  </li>
  <li>Удостоверьтесь в успешном запуске приложения по адресу: http://localhost/habits/</li>
</ol>

  <h2>II. Запуск проекта через Docker Compose на удаленном серверe:</h2>
<ol>
  <li>Подключитесь к вашему удаленному серверу</li>
  <li>Клонируйте репозиторий проекта и перейдите в ветку feature-1</li>
  <li>Скопируйте файл <code>.env.sample</code> в корневую директорию и переименуйте его в <code>.env</code>:</li>
  <li>Отредактируйте файл <code>.env</code> и задайте необходимые переменные окружения.</li>
  <li>Внесите в файл config/settings.py IP-адрес используемого удаленного сервера в следующие константы:</li>
  <pre>ALLOWED_HOSTS = ['yourhost', ] 
    CSRF_TRUSTED_ORIGINS = ["http://yourhost:8000",]</pre>
  <li>Запустите контейнеры Docker с помощью команды Docker Compose:
    <pre>docker-compose up -d --build</pre>
  </li>
  <li>Получите доступ к системе по адресу http://yourhost/habits/ в соответствии с заданным вами хостом.</li>
</ol>

  <ol><h2>III. Запуск и обновление проекта через GitHubActions</h2>
  <li>Клонируйте репозиторий проекта и перейдите в ветку feature-1</li>
  <li>Скопируйте файл <code>.env.sample</code> в корневую директорию и переименуйте его в <code>.env</code>:</li>
  <li>Отредактируйте файл <code>.env</code> и задайте необходимые переменные окружения.</li>
  <li>Перед запуском Workflow добавьте в секреты GitHubActions следующие переменные:</li> 
  <ul>
    <li>DEPLOY_DIR - абсолютный путь к корневой директории проекта</li>
    <li>SSH_key</li> 
    <li>DJANGO_SECRET_KEY</li> 
    <li>DOCKER_HUB_ACCESS_TOKEN</li> 
    <li>DOCKER_HUB_USERNAME</li>
    <li>SSH_USER</li>
    <li>SERVER_IP</li>
    <li><b>а также ENV_FILE - содержащий переменные окружения для #Redis #Celery и #Postgres в соотвествии с шаблоном env.sample</b></li></ul>
  <li>Workflow "Django CI" по умолчанию запустится на push или pull_request из любой ветки проекта</li></ol>
    
<h2>IV. Тестирование</h2>
  <p>Приложение развернуто и доступно для взаимодействий через API. Коллекция эндпойнтов прилагается. </p>
  <h4>1) При регистрации нового пользователя укажите tg_chat_id</h4>
<p></p>Если tg_chat_id не был указан или не был записан автоматической функцией – укажите его вручную через обновление профиля.</p>

<h4>2) Создание новой привычки</h4>
<p>Минимально требуемые данные:</p>
<pre>
{
    "action": "meditate",
    "start_time": "13:15:00"
}
</pre>
<b>Внимание! Если указанное вами время старта привычки в текущих сутках уже прошло – отправка напоминания будет перенесена на следующий день. 
Автоматический интервал отправки напоминания по умолчанию - ежеминутно с даты старта.</b>
